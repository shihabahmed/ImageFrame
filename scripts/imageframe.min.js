!function(e){var t={draw:function(e,a){t.render(e,a),a.Window.resize(function(){t.render(e,a)}),setTimeout(function(){t.render(e,a)},200)},render:function(a,n){clearInterval(n.swapInterval);var i=n.HeaderContainer.width(),r=t.getColumns(i);n.HeaderContent.css("height","");for(var o=n.ImageFrame.find("li").removeAttr("style"),s=0;s<o.length;s++)e(o[s]).attr("data-index",s);var d=i/r,m=n.HeaderContent.outerHeight();o.css({width:d,height:d}),m%d!=0&&(m=Math.ceil(m/d)*d,n.HeaderContent.css({height:m,margin:d,"box-sizing":"border-box"}),n.HeaderContainer.css({height:m+2*d}));for(var l=bottomImages=r,g=rightImages=m/d,f=(bottomImages,rightImages,n.HeaderContent.outerHeight()+d),u=n.HeaderContent.outerWidth()+d,h=0,s=0;s<l;s++)o.eq(s).css({left:d*s,top:0}).show();h=l;for(s=0;s<rightImages;s++)o.eq(s+h).css({left:u,top:d*(s+1)}).show();h=l+rightImages;for(s=0;s<bottomImages;s++)o.eq(s+h).css({left:d*(bottomImages-(s+1)),top:f}).show();h=l+rightImages+bottomImages;for(s=0;s<g;s++)o.eq(s+h).css({left:0,top:d*(g-s)}).show();t.swap(a,n)},swap:function(e,a){var n,i,r,o,s,d,m,l,g=a.ImageFrame.find("li:visible"),f=!1;a.swapInterval=setInterval(function(){f||(f=!0,n=t.RandomNumber(0,g.length-1),r=g.filter("[data-index="+n+"]"),s=r.find("img").clone(),i=t.RandomNumber(0,1),c=t.RandomNumber(0,1),i=0==n?0==c?g.length-1:1:n==g.length-1?0==c?1-g.length:-1:0==i?-1:1,o=g.filter("[data-index="+(n+i)+"]"),d=o.find("img").clone(),m=r.position(),l=o.position(),r.animate({top:l.top,left:l.left},e.duration,function(){r.attr("data-index",n+i)}),o.animate({top:m.top,left:m.left},e.duration,function(){o.attr("data-index",n),f=!1}))},e.interval)},getColumns:function(e){var t=9;return e>=1050?t=10:e>=850?t=9:e>=650?t=8:e>=450?t=7:e>=300&&(t=9),t},RandomNumber:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}};e.fn.extend({imageframe:function(a){e("head").append("<style type='text/css'>.imageframe { position: relative; }.imageframe ul { padding: 0; margin: 0; }.imageframe ul li { list-style: none; display: none; padding: 0; margin: 0; position: absolute; z-index: 999999; }.imageframe ul li img { display: block; width: 100%; height: 100%; }</style>");var n,i={interval:2e3,duration:600};return this.each(function(r,o){e.extend(i,a),(n={Window:e(window),ImageFrame:e(o).css({position:"relative"}),swapInterval:null}).ImageFrame.addClass("imageframe"),e.extend(n,{HeaderContainer:n.ImageFrame.parent(),HeaderContent:n.ImageFrame.siblings("div")}),t.draw(i,n)}),{start:function(){t.swap(i,n)},stop:function(){clearInterval(n.swapInterval)}}}})}(jQuery);
